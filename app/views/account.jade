// preset form values if we receive a userdata object //
- user = typeof(udata) != 'undefined' ? udata : { }

// store the userId on the client side in a hidden input field //
input(type='hidden', value= user._id)#userId

#account-form-container
    h3 #{title}
    form()#account-form.form-horizontal.well
        p#sub1.subheading #{subhead}
        hr
        fieldset
            #name-cg.control-group
                label.control-label(for='name-tf') Name
                .controls
                    input#name-tf.input-xlarge(type='text', name='name', value= user.name, required)
            #email-cg.control-group
                label.control-label(for='email-tf') Email
                .controls
                    input#email-tf.input-xlarge(type='email', name='email', value= user.email, required)
            #clist-cg.control-group
                label.control-label(for='country-list') Location
                .controls
                    select#country-list(name='country', required)
                        each item in countries
                            option(selected=item.name == user.country)= item.name
            hr
            p#sub2.subheading
            #user-cg.control-group
                label.control-label(for='user-tf') Username
                .controls
                    input#user-tf.input-xlarge.disabled(type='text', name='user', value= user.user, required)
            #pass-cg.control-group
                label.control-label(for='pass-tf') Password
                .controls
                    input#pass-tf.input-xlarge(type='password', name='pass', value='', required)
            .form-actions
                button(type='button')#account-cancel.btn Cancel
                button(type='submit')#account-submit.btn.btn-primary Sign Up